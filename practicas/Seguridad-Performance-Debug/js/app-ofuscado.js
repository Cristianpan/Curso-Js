const criptomonedasSelect=document.querySelector("#criptomonedas"),monedaSelect=document.querySelector("#moneda"),formulario=document.querySelector("#formulario"),resultado=document.querySelector("#resultado"),objBusqueda={moneda:"",criptomoneda:""},obtenerCriptomonedas=a=>new Promise(b=>{b(a)});
document.addEventListener("DOMContentLoaded",()=>{consultarCriptomonedas();formulario.addEventListener("submit",submitFormulario);criptomonedasSelect.addEventListener("change",leerValor);monedaSelect.addEventListener("change",leerValor)});function consultarCriptomonedas(){fetch("https://min-api.cryptocompare.com/data/top/mktcapfull?limit=10&tsym=USD").then(a=>a.json()).then(a=>obtenerCriptomonedas(a.Data)).then(a=>selectCriptomonedas(a)).catch(a=>console.log(a))}
function selectCriptomonedas(a){const b=performance.now();for(let c=0;c<a.length;c++){const {FullName:d,Name:f}=a[c].CoinInfo,e=document.createElement("option");e.value=f;e.textContent=d;criptomonedasSelect.appendChild(e)}a=performance.now();console.log(a-b)}function leerValor(a){objBusqueda[a.target.name]=a.target.value}function submitFormulario(a){a.preventDefault();const {moneda:b,criptomoneda:c}=objBusqueda;""===b||""===c?mostrarAlerta("Ambos campos son obligatorios"):consultarAPI()}
function mostrarAlerta(a){const b=document.createElement("div");b.classList.add("error");b.textContent=a;formulario.appendChild(b);setTimeout(()=>{b.remove()},3E3)}function consultarAPI(){const {moneda:a,criptomoneda:b}=objBusqueda,c=`https://min-api.cryptocompare.com/data/pricemultifull?fsyms=${b}&tsyms=${a}`;mostrarSpinner();fetch(c).then(d=>d.json()).then(d=>{mostrarCotizacionHTML(d.DISPLAY[b][a])})}
function mostrarCotizacionHTML(a){limpiarHTML();console.log(a);const {PRICE:b,HIGHDAY:c,LOWDAY:d,CHANGEPCT24HOUR:f,LASTUPDATE:e}=a;a=document.createElement("p");a.classList.add("precio");a.innerHTML=`El Precio es: <span> ${b} </span>`;const g=document.createElement("p");g.innerHTML=`<p>Precio m\u00e1s alto del d\u00eda: <span>${c}</span> </p>`;const h=document.createElement("p");h.innerHTML=`<p>Precio m\u00e1s bajo del d\u00eda: <span>${d}</span> </p>`;const k=document.createElement("p");k.innerHTML=
`<p>Variaci\u00f3n \u00faltimas 24 horas: <span>${f}%</span></p>`;const l=document.createElement("p");l.innerHTML=`<p>\u00daltima Actualizaci\u00f3n: <span>${e}</span></p>`;debugger;resultado.appendChild(a);resultado.appendChild(g);resultado.appendChild(h);resultado.appendChild(k);resultado.appendChild(l);formulario.appendChild(resultado)}
function mostrarSpinner(){limpiarHTML();const a=document.createElement("div");a.classList.add("spinner");a.innerHTML='\n        <div class="bounce1"></div>\n        <div class="bounce2"></div>\n        <div class="bounce3"></div>    \n    ';resultado.appendChild(a)}function limpiarHTML(){for(;resultado.firstChild;)resultado.removeChild(resultado.firstChild)};
